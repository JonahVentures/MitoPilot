<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>NMNH Hydra • MitoPilot</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="NMNH Hydra">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MitoPilot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JonahVentures/MitoPilot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NMNH Hydra</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JonahVentures/MitoPilot/blob/main/vignettes/NMNH-Hydra.Rmd" class="external-link"><code>vignettes/NMNH-Hydra.Rmd</code></a></small>
      <div class="d-none name"><code>NMNH-Hydra.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-to-use-mitopilot-on-the-smithsonian-hydra-computing-cluster">How to use MitoPilot on the Smithsonian Hydra computing cluster<a class="anchor" aria-label="anchor" href="#how-to-use-mitopilot-on-the-smithsonian-hydra-computing-cluster"></a>
</h2>
<p>You will need an account to access the Hyrda computing cluster.
Instructions are available <a href="https://confluence.si.edu/display/HPC/Hydra+Policies" class="external-link">here</a>.</p>
<p>Dan MacGuigan has submitted a request to the Hydra team for a
system-wide Nextflow module. But for now, you will need to install
Nextflow on Hydra. Also, for some reason, Nextflow does not work with
the Java modules on Hydra, so you also need to install Java via
SDKMAN.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Nextflow installation instructions</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># from https://www.nextflow.io/docs/latest/install.html</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="bu">cd</span> ~</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> https://get.sdkman.io <span class="kw">|</span> <span class="fu">bash</span> <span class="co"># install SDKMAN</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="ex">sdk</span> install java 17.0.10-tem <span class="co"># install java</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> https://get.nextflow.io <span class="kw">|</span> <span class="fu">bash</span> <span class="co"># install Nextflow</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="fu">chmod</span> +x nextflow <span class="co"># make Nextflow executable</span></span></code></pre></div>
<p>There will now be an executable <code>nextflow</code> file in your
home directory. You should move it to a location that is in your PATH.
For example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">mkdir</span> ~/bin</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">mv</span> ~/nextflow ~/bin/nextflow</span></code></pre></div>
<p>This allows you to call <code>nextflow</code> from anywhere on the
cluster. Now you’re ready to start using MitoPilot on Hydra!</p>
<ul>
<li>login to Hydra</li>
<li>start an interactive session by running <code>qrsh</code>
</li>
<li>run <code>conda deactivate</code> to avoid package conflicts (may
not be necessary for all users)</li>
<li>run <code>module load tools/R/RStudio/server</code>
</li>
<li>run <code>start-rstudio-server</code> (you may be asked to run a
different command if this is your first time)</li>
<li>leave this cluster terminal window open</li>
<li>in a new terminal window on your local computer:
<ul>
<li>start an ssh tunnel by running something like
<code>ssh -N -L 8787:compute-64-16:8787 sylvain@hydra-login01.si.edu</code>
<ul>
<li>the exact command should have been printed by
<code>start-rstudio-server</code> in your cluster terminal window</li>
</ul>
</li>
<li>leave this local terminal window open</li>
<li>open a web browser and enter <code>http://localhost:8787</code> in
the URL bar</li>
<li>enter your cluster login credentials to access the RStudio
server</li>
<li>any commands run in this new window will execute on the cluster in
the interactive session</li>
</ul>
</li>
<li>to install MitoPilot, use the RStudio server window to run the
following</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://bioconductor.github.io/BiocManager/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"JonahVentures/MitoPilot"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>check that installation was successful by loading the library with
<code><a href="https://github.com/JonahVentures/MitoPilot" class="external-link">library(MitoPilot)</a></code>
</li>
<li>you can now follow instructions on the <a href="https://github.com/JonahVentures/MitoPilot" class="external-link">MitoPilot GitHub
page</a> to run the test dataset</li>
</ul>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Devin Leopold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
